{"version":3,"file":"RouteProvider.js","names":["RouteProvider","location","routes","params","children","getRoute","path","getRoutePath","initialRoute","useMemo","currentRoute","useRef","current","React","createElement","RouteContext","Provider","value","routeShape","PropTypes","string","arrayOf","shape","routeType","propTypes","pathname","isRequired","query","objectOf","search","hash","key","state","any","index","number","delta","action","oneOf","node"],"sources":["../../lib/router/RouteProvider.js"],"sourcesContent":["import React, { useRef, useMemo } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport getRoutePath from './getRoutePath.js'\r\n\r\nimport RouteContext from './RouteContext.js'\r\n\r\nexport default function RouteProvider({\r\n\tlocation,\r\n\troutes,\r\n\tparams,\r\n\tchildren\r\n}) {\r\n\tconst getRoute = () => ({\r\n\t\tlocation,\r\n\t\tparams,\r\n\t\tpath: getRoutePath(routes)\r\n\t})\r\n\r\n\tconst initialRoute = useMemo(() => getRoute(), [])\r\n\r\n\tconst currentRoute = useRef(initialRoute)\r\n\r\n\t// `location` is `undefined` when router starts loading the next page.\r\n\t// In that case, the previous page is still rendered, so `currentRoute`\r\n\t// shouldn't change.\r\n\tif (location) {\r\n\t\tif (location !== currentRoute.current) {\r\n\t\t\tcurrentRoute.current = getRoute()\r\n\t\t}\r\n\t}\r\n\r\n\treturn React.createElement(\r\n\t\tRouteContext.Provider,\r\n\t\t{ value: currentRoute.current },\r\n\t\tchildren\r\n\t)\r\n}\r\n\r\nconst routeShape = {\r\n\t// A `route` doesn't always have a `path` property:\r\n\t// `found` router allows that when nesting routes.\r\n\t// Example: `{ Component: Wrapper, children: { path: '/', Component: Home } }`.\r\n\tpath: PropTypes.string\r\n}\r\n\r\nrouteShape.children = PropTypes.arrayOf(PropTypes.shape(routeShape))\r\n\r\nconst routeType = PropTypes.shape(routeShape)\r\n\r\nRouteProvider.propTypes = {\r\n\tlocation: PropTypes.shape({\r\n\t\tpathname: PropTypes.string.isRequired,\r\n\t\tquery: PropTypes.objectOf(PropTypes.string).isRequired,\r\n\t\tsearch: PropTypes.string.isRequired,\r\n\t\thash: PropTypes.string.isRequired,\r\n\r\n\t\t// Miscellaneous (not used).\r\n\r\n\t\t// Some kind of a possibly-likely-unique key. Is empty for the initial page.\r\n\t\tkey: PropTypes.string,\r\n\r\n\t\t// History entry state. Can be empty.\r\n\t\tstate: PropTypes.any,\r\n\r\n\t\t// Index in browser history stack.\r\n\t\tindex: PropTypes.number.isRequired,\r\n\r\n\t\t// The \"delta\" in terms of `index` change as a result of the navigation.\r\n\t\t// For example, a regular hyperlink click is `delta: 1`.\r\n\t\t// A \"Back\" action is `delta: -1`. A user could go several pages \"Back\".\r\n\t\tdelta: PropTypes.number,\r\n\r\n\t\t// 'PUSH' or 'REPLACE' if the location was reached via history \"push\" or\r\n    // \"replace\" action respectively. 'POP' on the initial location, or if\r\n\t\t// the location was reached via the browser \"Back\" or \"Forward\" buttons\r\n\t\t// or via `FarceActions.go`.\r\n\t\taction: PropTypes.oneOf(['PUSH', 'REPLACE', 'POP']).isRequired\r\n\t}),\r\n\r\n\troutes: PropTypes.arrayOf(routeType),\r\n\r\n\tparams: PropTypes.objectOf(PropTypes.string),\r\n\r\n\tchildren: PropTypes.node\r\n}"],"mappings":";;;;;;;AAAA;AACA;AAEA;AAEA;AAA4C;AAAA;AAAA;AAE7B,SAASA,aAAa,OAKlC;EAAA,IAJFC,QAAQ,QAARA,QAAQ;IACRC,MAAM,QAANA,MAAM;IACNC,MAAM,QAANA,MAAM;IACNC,QAAQ,QAARA,QAAQ;EAER,IAAMC,QAAQ,GAAG,SAAXA,QAAQ;IAAA,OAAU;MACvBJ,QAAQ,EAARA,QAAQ;MACRE,MAAM,EAANA,MAAM;MACNG,IAAI,EAAE,IAAAC,wBAAY,EAACL,MAAM;IAC1B,CAAC;EAAA,CAAC;EAEF,IAAMM,YAAY,GAAG,IAAAC,cAAO,EAAC;IAAA,OAAMJ,QAAQ,EAAE;EAAA,GAAE,EAAE,CAAC;EAElD,IAAMK,YAAY,GAAG,IAAAC,aAAM,EAACH,YAAY,CAAC;;EAEzC;EACA;EACA;EACA,IAAIP,QAAQ,EAAE;IACb,IAAIA,QAAQ,KAAKS,YAAY,CAACE,OAAO,EAAE;MACtCF,YAAY,CAACE,OAAO,GAAGP,QAAQ,EAAE;IAClC;EACD;EAEA,OAAOQ,iBAAK,CAACC,aAAa,CACzBC,wBAAY,CAACC,QAAQ,EACrB;IAAEC,KAAK,EAAEP,YAAY,CAACE;EAAQ,CAAC,EAC/BR,QAAQ,CACR;AACF;AAEA,IAAMc,UAAU,GAAG;EAClB;EACA;EACA;EACAZ,IAAI,EAAEa,qBAAS,CAACC;AACjB,CAAC;AAEDF,UAAU,CAACd,QAAQ,GAAGe,qBAAS,CAACE,OAAO,CAACF,qBAAS,CAACG,KAAK,CAACJ,UAAU,CAAC,CAAC;AAEpE,IAAMK,SAAS,GAAGJ,qBAAS,CAACG,KAAK,CAACJ,UAAU,CAAC;AAE7ClB,aAAa,CAACwB,SAAS,GAAG;EACzBvB,QAAQ,EAAEkB,qBAAS,CAACG,KAAK,CAAC;IACzBG,QAAQ,EAAEN,qBAAS,CAACC,MAAM,CAACM,UAAU;IACrCC,KAAK,EAAER,qBAAS,CAACS,QAAQ,CAACT,qBAAS,CAACC,MAAM,CAAC,CAACM,UAAU;IACtDG,MAAM,EAAEV,qBAAS,CAACC,MAAM,CAACM,UAAU;IACnCI,IAAI,EAAEX,qBAAS,CAACC,MAAM,CAACM,UAAU;IAEjC;;IAEA;IACAK,GAAG,EAAEZ,qBAAS,CAACC,MAAM;IAErB;IACAY,KAAK,EAAEb,qBAAS,CAACc,GAAG;IAEpB;IACAC,KAAK,EAAEf,qBAAS,CAACgB,MAAM,CAACT,UAAU;IAElC;IACA;IACA;IACAU,KAAK,EAAEjB,qBAAS,CAACgB,MAAM;IAEvB;IACE;IACF;IACA;IACAE,MAAM,EAAElB,qBAAS,CAACmB,KAAK,CAAC,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAACZ;EACrD,CAAC,CAAC;EAEFxB,MAAM,EAAEiB,qBAAS,CAACE,OAAO,CAACE,SAAS,CAAC;EAEpCpB,MAAM,EAAEgB,qBAAS,CAACS,QAAQ,CAACT,qBAAS,CAACC,MAAM,CAAC;EAE5ChB,QAAQ,EAAEe,qBAAS,CAACoB;AACrB,CAAC"}