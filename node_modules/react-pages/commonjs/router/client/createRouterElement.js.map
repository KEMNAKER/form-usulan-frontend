{"version":3,"file":"createRouterElement.js","names":["createRouterElement","renderArgs","dispatch","getState","ConnectedRouter","createConnectedRouter","render","elements","window","reactPagesRemountOnNavigate","length","React","cloneElement","key","location","pathname","createElement","RouteProvider","params","routes","ScrollManager","matchContext","resolver","initialRenderArgs"],"sources":["../../../lib/router/client/createRouterElement.js"],"sourcesContent":["import React from 'react'\r\n\r\n// `@catamphetamine/found` is the same as `found`\r\n// with the only change being that `redux` and `react-redux` packages\r\n// were moved from `dependencies` to `peerDependencies` in `package.json`.\r\nimport { createConnectedRouter, resolver } from '@catamphetamine/found'\r\n\r\n// `@catamphetamine/found-scroll` is the same as `found-scroll`\r\n// with the only change being that in its `peerDependencies`\r\n// `found` was replaced with `@catamphetamine/found`.\r\n// The reason is that `found` package is not installed due to not being used\r\n// and `@catamphetamine/found` package is being used instead of it.\r\nimport { ScrollManager } from '@catamphetamine/found-scroll'\r\n\r\nimport RouteProvider from '../RouteProvider.js'\r\n\r\nimport render from '../render.js'\r\n\r\nexport default function createRouterElement(renderArgs, { dispatch, getState }) {\r\n\tconst ConnectedRouter = createConnectedRouter({\r\n\t\trender: (renderArgs) => {\r\n\t\t\t// Force re-mount the last route component on location path change.\r\n\t\t\t// https://github.com/4Catalyzer/found/issues/199#issuecomment-415616836\r\n\t\t\tconst elements = renderArgs.elements\r\n\t\t\tif (elements && window.reactPagesRemountOnNavigate !== false) {\r\n\t\t\t\telements[elements.length - 1] = React.cloneElement(elements[elements.length - 1], { key: renderArgs.location.pathname })\r\n\t\t\t}\r\n\t\t\t// When a user navigates to a page, this `render()` function is called:\r\n\t\t\t// * If there's any `load()` data loader:\r\n\t\t\t//   * The first call is gonna be with `elements: undefined` and the new `location`,\r\n\t\t\t//     before the page starts loading the initial data.\r\n\t\t\t//     `<RouteProvider/>` ignores this `render()` call.\r\n\t\t\t//   * The second call is gonna be with `elements: React.Element[]` and the new `location`,\r\n\t\t\t//     after the page has loaded the initial data.\r\n\t\t\t// * Otherwise, if there's no data to load:\r\n\t\t\t//   * The page just renders with `elements: React.Element[]` and the new `location`.\r\n\t\t\treturn React.createElement(\r\n\t\t\t\tRouteProvider,\r\n\t\t\t\t{\r\n\t\t\t\t\t// `elements` is `undefined` when router starts loading the next page.\r\n\t\t\t\t\t// In that case, the previous page is still rendered, so it shouldn't\r\n\t\t\t\t\t// pass the new `location` to `<RouteProvider/>` yet.\r\n\t\t\t\t\tlocation: elements && renderArgs.location,\r\n\t\t\t\t\tparams: elements && renderArgs.params,\r\n\t\t\t\t\troutes: elements && renderArgs.routes\r\n\t\t\t\t},\r\n\t\t\t\tReact.createElement(\r\n\t\t\t\t\tScrollManager,\r\n\t\t\t\t\t{ renderArgs },\r\n\t\t\t\t\trender(renderArgs)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t}\r\n\t})\r\n\treturn React.createElement(\r\n\t\tConnectedRouter,\r\n\t\t{\r\n\t\t\tmatchContext: {\r\n\t\t\t\tdispatch,\r\n\t\t\t\tgetState\r\n\t\t\t},\r\n\t\t\tresolver,\r\n\t\t\tinitialRenderArgs: renderArgs\r\n\t\t}\r\n\t)\r\n}"],"mappings":";;;;;;AAAA;AAKA;AAOA;AAEA;AAEA;AAAiC;AAdjC;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAOe,SAASA,mBAAmB,CAACC,UAAU,QAA0B;EAAA,IAAtBC,QAAQ,QAARA,QAAQ;IAAEC,QAAQ,QAARA,QAAQ;EAC3E,IAAMC,eAAe,GAAG,IAAAC,4BAAqB,EAAC;IAC7CC,MAAM,EAAE,gBAACL,UAAU,EAAK;MACvB;MACA;MACA,IAAMM,QAAQ,GAAGN,UAAU,CAACM,QAAQ;MACpC,IAAIA,QAAQ,IAAIC,MAAM,CAACC,2BAA2B,KAAK,KAAK,EAAE;QAC7DF,QAAQ,CAACA,QAAQ,CAACG,MAAM,GAAG,CAAC,CAAC,GAAGC,iBAAK,CAACC,YAAY,CAACL,QAAQ,CAACA,QAAQ,CAACG,MAAM,GAAG,CAAC,CAAC,EAAE;UAAEG,GAAG,EAAEZ,UAAU,CAACa,QAAQ,CAACC;QAAS,CAAC,CAAC;MACzH;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,OAAOJ,iBAAK,CAACK,aAAa,CACzBC,yBAAa,EACb;QACC;QACA;QACA;QACAH,QAAQ,EAAEP,QAAQ,IAAIN,UAAU,CAACa,QAAQ;QACzCI,MAAM,EAAEX,QAAQ,IAAIN,UAAU,CAACiB,MAAM;QACrCC,MAAM,EAAEZ,QAAQ,IAAIN,UAAU,CAACkB;MAChC,CAAC,EACDR,iBAAK,CAACK,aAAa,CAClBI,0BAAa,EACb;QAAEnB,UAAU,EAAVA;MAAW,CAAC,EACd,IAAAK,mBAAM,EAACL,UAAU,CAAC,CAClB,CACD;IACF;EACD,CAAC,CAAC;EACF,OAAOU,iBAAK,CAACK,aAAa,CACzBZ,eAAe,EACf;IACCiB,YAAY,EAAE;MACbnB,QAAQ,EAARA,QAAQ;MACRC,QAAQ,EAARA;IACD,CAAC;IACDmB,QAAQ,EAARA,eAAQ;IACRC,iBAAiB,EAAEtB;EACpB,CAAC,CACD;AACF"}